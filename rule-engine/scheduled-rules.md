# Scheduled Rules

## Overview

The rule engine is implemented as a stateful **event driven** system which reacts to data by evaluating conditions when a new data command is added or an old command is removed from the window.

To evaluate the rule on a schedule instead of based on a command use built-in **timer** metrics.

**Metric Name** | **Frequency**
---|:---
`timer_15s` | 15 seconds.
`timer_1m` | 1 minute.
`timer_15m` | 15 minutes.
`timer_1h` | 1 hour.

The **timer** metrics are generated by the database itself and are always available.

By reacting to a `timer` metric, a rule is evaluated at the specified frequency, for example, every 15 minutes:

![](./images/new-metric.png)

## Analyzing Data

To analyze data for a specific metric and not the `timer` metric itself, use [database](functions-series.md) and [lookup](functions-lookup.md) functions.

**Example**:

The condition is `true` if the average value for the given series exceeds the threshold.

```javascript
db_statistic('avg', '3 hour', 'temperature', 'sensor-01') > 50
```

**Example**:

The condition is `true` if one of the entities collecting `jmx.zookeeper.tick` metric no longer inserts data.

```javascript
getEntityCount('jmx.zookeeper.tick', 'now - 1*DAY', 'now - 1*HOUR', '') > 0
```

## Calendar Filter

To execute actions during specific times of the day or to restrict the times of the day when the rule is active, test the `now` field as part of the condition.

[`now`](window-fields.md#date-fields) represents current server time as a [`DateTime`](object-datetime.md) object. Access the properties of this object with `get()` methods.

```javascript
now.getHourOfDay() = 15 AND now.getDayOfWeek() = 4
```

![](./images/new-condition.png)